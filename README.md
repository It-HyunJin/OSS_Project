![image](https://github.com/It-HyunJin/OSS_Project/assets/165642959/f35166e3-14c7-49fb-b92c-1cdc2223a20c)# 우울증을 중심으로 한 인간의 텍스트 기반 감정분석 및 공감형 인공지능 연구


***

## 기획 의도
2021년 기준 OECD 국가 중 대한민국이 우울증 유병률 1위, 치료율은 죄저를 기록했다. 전문가들은 우울증의 조기 발견과 적극 치료가 우울증 재발 및 발생 방지에 중요한 역할을 차지한다고 밝혔고, 이에 일상을 기록하는 일기 서비스를 개발해 우울증 조기 발견을 도모하고자 한다.

* 바쁜 현대인들이 하루 일과 및 감정을 짧고 간단하게 기록해도 인공지능이 감정을 파악해서 정신 건강 상태를 알려줄 수 있도록 한다.
  * 우울증 및 정신 질환을 조기에 발현해서 일찍 조치할 수 있도록 한다.

#### 사용자 시나리오
1. 웹 실행 시 홈 화면에서 '오늘의 일기'를 누르고 일기를 작성한다.
2. 일기 작성 후 하단의 '분석' 버튼을 누른다.
   * 문장 단위로 감정을 분석할 수 있도록 데이터 셋을 학습시켰으며 이를 기반으로 사용자의 우울도가 퍼센트(%) 단위로 나온다.
   * STT 기능을 통해 짧은 음성 녹음 시 음성 파일을 인식해 텍스트로 변환한다.
3. 왼쪽 상단 팝업창에 있는 '감정 대화'를 누른다.
   * 공감형 인공지능을 훈련시켜 사용자가 부정적인 대화를 할 경우 위로의 메세지를 출력한다.
  
## 프로젝트 summary

###### 웹 일기장
1. Django를 이용해 일기장 웹 형식으로 개발
2. AI HUB를 통해 필요한 감정 대화 데이터셋을 구축
3. 구축한 데이터셋을 정리해 기쁨 분노 우울 놀람 공포 불안의 6가지 감정으로 데이터셋을 라벨링 후 .xlsx파일로 저장
4. Colab으로 Kobert 다중 감정 학습을 진행
5. 학습된 모델을 .pt의 Pytorch 모델로 저장, 우울도 예측
6. Google speech-to-text를 이용해 음성 변환을 진행 기능 추가

###### 인공지능 챗봇
1. SentenceBERT 모델을 통해 입력 받은 글을 처리
2. AI_HUB에서 다운받은 정신건강 상담 주제의 대화 의도에 대한 사용자 발화 및 챗봇 발화를 구축: 데이터셋 구축
3. nan등 비어있는 값으로 되어있는 값들을 처리하고 각각 데이터셋의 있는 유저열에 있는 글을 모두 encoding을 통해 벡터화하며 전처리
4. cosine_similarity를 이용하여 데이터셋의 유저의 벡터 값과 input의 벡터값의 '유사도'를 구해 데이터 프레임에 저장

## 개발 도구 및 작업 환경
* Colab Python
 * 라이브러리와 학습이 편리한 개발 환경이며 GPU를 사용할 수 있어 선택
 * Kobert 학습 시에도 SKTBrain의 Git을 연결하여 진행

* Django
 *Colab에서 학습시킨 Pytorch 모델과 연결하기 효율적이라고 판단하여 Django로 연동

* Kobert
 *한국어 문장 학습에 가장 적합한 모델이라고 판단하여 Kobert 모델을 선택

* Google speech-to-text
  * 유저의 음성 데이터를 텍스트로 변환하기 위해 사용
  * 문장을 잘못 인식하는 경우도 있었으나 사용하기가 편해 웹 사용 빈도 수를 늘일 수 있도록 함
 
* SentenceBERT
  * Huggingface에 있는 SentenceBert인 한국어 문장 처리 모델 선택
  * 한국어 문장 처리 모델로 한국어로 챗봇을 사용하고 그에 대한 답을 갖고 오기 위해 선택


## 역할

###### 김현진:팀장, 10641
* 공감형 인공지능 챗봇 구축 및 서버 연동
* Django home 서버 합침
###### 박세은:2214126
* 데이터셋 분류, 라벨링을 통한 모델 학습
* Django UI를 적용시켜 일기 작성 시 우울도 판별 프로그램 개발
###### 강규린:2215987
* speech-to-text API 연동 및 구현
* Django UI를 활용한 speech-to-text 설계

## 문제점 및 실효성
* STT 모델의 연동 문제
  * 처음부터 개발 환경을 통일하지 않고 다른 개발 환경을 사용한 탓에 구현은 성공했지만, 연동하는 데에 있어서 어려움이 있었다. 현재 개발한 모델은 음성을 텍스트로 변환하는 과정 중 새로고침 기능이 필수적으로 사용되어야 하기 때문에 버튼을 누르면 새로운 창에서 텍스트를 변환하는 형식이다. 하지만 매끄러운 연동을 위해서는 한 페이지에서 모든 과정이 이루어져야 하고, 이를 위해 ajax를 사용하고자 했으나 시간 부족으로 인해 해결하지 못한 부분이 아쉽다.

* 공감형 챗봇 답변의 낮은 다양성
  * 해당 데이터셋을 사용하여 모델을 구축하면 유사도를 계산하여 라벨링된 정답들이 나오는 것이기 때문에 문맥에 맞지 않는 답을 하는 경우들이 있어서 따로 데이터셋을 더 추가할 필요성이 보인다.

* 감정 분석 결과의 약한 확실성
  * kss를 통해 문장을 나누는데 문장을 어떻게 나누는 지에 따라 감정 분석 결과가 달라진다. 따라서 다양한 문장을 리리하는데 기술에 있어서 조금 더 세심하게 관리를 못한 아쉬움이 있다. 

* 개발한 웹의 실효성
생활 속에서 현대인들의 번아웃 및 우울증 방지를위한 웹 개발을 목적으로 프로젝트를 진행했기 때문에 큰 성과라고는 말할 수 없어도 충분히 성장 가능성이 있으며 팀 목적을 달성했다고 생각한다. 짧은 줄글과 음성으로도 우울도를 분석할 수 있기 때문에 번거롭지 않고, 휴대폰으로 접속할 수 있다는 건 큰 장점이라고 생각한다.
